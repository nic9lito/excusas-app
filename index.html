<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Excusator Pro Max üöÄ</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
<script src="https://kit.fontawesome.com/a81368914c.js" crossorigin="anonymous"></script>
<style>
  /* Reset y fuentes */
  * {box-sizing: border-box;}
  body {
    margin:0; padding:0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
    color: #e0eaf1;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px;
  }
  h1,h2,h3 {
    text-align: center;
    margin: 8px 0;
    text-shadow: 0 0 8px #00f0ffcc;
  }
  h1 {font-size: 2.8rem;}
  h2 {font-size: 1.8rem; margin-top: 20px;}
  h3 {font-size: 1.3rem; margin-bottom: 10px;}
  input, select, textarea, button {
    font-family: inherit;
    font-size: 1rem;
    padding: 10px 15px;
    margin: 6px 5px;
    border-radius: 12px;
    border: none;
    outline: none;
  }
  input, select, textarea {
    width: 100%;
    max-width: 300px;
  }
  button {
    cursor: pointer;
    background: #00e5ff;
    color: #000;
    font-weight: 700;
    box-shadow: 0 0 10px #00d2ff88;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #00b8d4;
    color: #fff;
  }
  .hidden {display: none !important;}
  .section {
    max-width: 600px;
    width: 100%;
    margin-top: 20px;
    background: rgba(0,0,0,0.35);
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 0 20px #00d2ffaa;
  }
  #app {width: 100%; max-width: 700px;}

  /* Men√∫ */
  #menu {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    margin-bottom: 15px;
  }
  #menu button {
    flex: 1 1 130px;
    margin: 6px 8px;
  }
  #menu button.active {
    background: #0099bb;
    color: white;
    box-shadow: 0 0 15px #00d2ffcc;
  }

  /* Excusas */
  #excusaCard {
    font-size: 1.3rem;
    min-height: 120px;
    line-height: 1.4;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px;
    background: #142c44;
    border-radius: 18px;
    box-shadow: 0 0 10px #00bcd4cc;
    margin-bottom: 12px;
    user-select: none;
    text-align: center;
  }
  .filters {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 15px;
  }
  .filters select {
    max-width: 180px;
  }
  #speakBtn {
    background: #ff5722 !important;
    color: white !important;
  }

  /* Flashcards */
  #flashcard {
    background: #142c44;
    border-radius: 20px;
    padding: 25px;
    min-height: 150px;
    font-size: 1.2rem;
    user-select: none;
    box-shadow: 0 0 15px #00bcd4cc;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
  }
  .flashcard-controls {
    display: flex;
    justify-content: center;
    margin-top: 15px;
  }
  .flashcard-controls button {
    margin: 0 10px;
  }
  #crearFlashcardForm {
    margin-top: 15px;
  }
  #crearFlashcardForm textarea {
    resize: vertical;
    min-height: 60px;
  }

  /* Chistes */
  #chisteCard {
    background: #142c44;
    border-radius: 18px;
    padding: 25px;
    font-size: 1.3rem;
    min-height: 120px;
    text-align: center;
    user-select: none;
    box-shadow: 0 0 15px #00bcd4cc;
  }
  .vote-buttons {
    margin: 15px 0;
  }
  .vote-buttons button {
    margin: 0 10px;
    font-size: 1.3rem;
  }
  #filtroChistes {
    margin-top: 10px;
    max-width: 220px;
  }

  /* Perfil */
  #perfilStats {
    text-align: center;
    margin-top: 15px;
    font-size: 1rem;
  }
  #nivel {
    font-weight: 700;
    color: #00f0ff;
    text-shadow: 0 0 6px #00bcd4;
  }

  /* Animaciones */
  .fadeIn {
    animation: fadeIn 0.5s ease forwards;
  }
  .fadeOut {
    animation: fadeOut 0.5s ease forwards;
  }
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
  @keyframes fadeOut {
    from {opacity: 1;}
    to {opacity: 0;}
  }

  /* Responsive */
  @media (max-width: 600px) {
    #menu {
      flex-direction: column;
      align-items: center;
    }
    #menu button {
      max-width: 300px;
      width: 90%;
    }
    .filters {
      flex-direction: column;
      align-items: center;
    }
  }
</style>
</head>
<body>

<h1 id="saludo">¬°Hola!</h1>
<div id="loginSection" class="section">
  <input id="nombreInput" type="text" placeholder="Pon tu nombre para empezar" autocomplete="off" />
  <button id="btnEntrar">Entrar</button>
</div>

<div id="app" class="hidden">

  <div id="menu">
    <button id="btnExcusas" class="active"><i class="fas fa-mask"></i> Excusas</button>
    <button id="btnFlashcards"><i class="fas fa-book"></i> Flashcards</button>
    <button id="btnChistes"><i class="fas fa-laugh"></i> Chistes</button>
    <button id="btnPerfil"><i class="fas fa-user"></i> Perfil</button>
    <button id="btnCerrar"><i class="fas fa-sign-out-alt"></i> Cerrar sesi√≥n</button>
  </div>

  <!-- Excusas -->
  <section id="seccionExcusas" class="section">
    <h2>Excusa Generator Pro Max</h2>

    <div class="filters">
      <select id="filtroTipo">
        <option value="todos">Tipo de excusa (Todos)</option>
        <option value="colegio">Colegio</option>
        <option value="padres">Padres</option>
        <option value="amigos">Amigos</option>
        <option value="profesores">Profesores</option>
        <option value="curro">Curro</option>
      </select>

      <select id="filtroDrama">
        <option value="todos">Nivel drama (Todos)</option>
        <option value="chill">Chill</option>
        <option value="creible">Cre√≠ble</option>
        <option value="telenovela">Nivel Telenovela</option>
      </select>
    </div>

    <div id="excusaCard">Pulsa el bot√≥n para generar excusa</div>
    <div style="display:flex; justify-content:center; gap: 10px;">
      <button id="btnNuevaExcusa"><i class="fas fa-redo"></i> Dame otra</button>
      <button id="speakBtn"><i class="fas fa-volume-up"></i> L√©eme la excusa</button>
    </div>
  </section>

  <!-- Flashcards -->
  <section id="seccionFlashcards" class="section hidden">
    <h2>Flashcards nivel TikTok</h2>
    <select id="filtroFlashcardCategoria">
      <option value="todos">Categor√≠a (Todas)</option>
      <option value="mates">Mates</option>
      <option value="lengua">Lengua</option>
      <option value="historia">Historia</option>
    </select>
    <div id="flashcard" class="fadeIn">Selecciona categor√≠a y pulsa siguiente ‚Üí</div>
    <div class="flashcard-controls">
      <button id="flashPrev"><i class="fas fa-chevron-left"></i></button>
      <button id="flashNext"><i class="fas fa-chevron-right"></i></button>
    </div>

    <form id="crearFlashcardForm">
      <h3>Crear tu propia flashcard</h3>
      <select id="nuevaFlashCategoria" required>
        <option value="" disabled selected>Selecciona categor√≠a</option>
        <option value="mates">Mates</option>
        <option value="lengua">Lengua</option>
        <option value="historia">Historia</option>
      </select>
      <textarea id="nuevaFlashTexto" placeholder="Escribe el texto..." required></textarea>
      <button type="submit">A√±adir Flashcard</button>
    </form>

    <p style="margin-top: 15px; font-style: italic; text-align:center; color:#b0e0ff;">
      Tip del d√≠a: <span id="tipDia">Cargando...</span>
    </p>
  </section>

  <!-- Chistes -->
  <section id="seccionChistes" class="section hidden">
    <h2>Chistes locos üòÇ</h2>
    <select id="filtroChistes">
      <option value="todos">Filtro (Todos)</option>
      <option value="tontos">Tontos</option>
      <option value="profes">Para profes</option>
      <option value="ligar">Para ligar</option>
    </select>
    <div id="chisteCard" class="fadeIn">Pulsa "Hazme re√≠r YA" para empezar</div>
    <div class="vote-buttons">
      <button id="btnMeGusta"><i class="fas fa-thumbs-up"></i></button>
      <button id="btnNoMeGusta"><i class="fas fa-thumbs-down"></i></button>
    </div>
    <button id="btnRandomChiste"><i class="fas fa-dice"></i> Hazme re√≠r YA</button>
  </section>

  <!-- Perfil -->
  <section id="seccionPerfil" class="section hidden">
    <h2>Perfil de <span id="nombrePerfil"></span></h2>
    <div id="perfilStats">
      <p>Excusas usadas: <span id="estadExcusas">0</span></p>
      <p>Chistes le√≠dos: <span id="estadChistes">0</span></p>
      <p>Nivel Estudiante de la excusa: <span id="nivel">Novato</span></p>
    </div>
  </section>

</div>

<script>
  // --- DATOS BASE ---

  const excusasData = [
    { tipo: "colegio", drama: "chill", texto: "Se me olvidaron los deberes en casa." },
    { tipo: "colegio", drama: "creible", texto: "Me mare√© en clase y tuve que salir." },
    { tipo: "padres", drama: "chill", texto: "Se fue la luz y no pude encender nada." },
    { tipo: "padres", drama: "telenovela", texto: "Mi abuela est√° grave y me tuve que quedar." },
    { tipo: "amigos", drama: "creible", texto: "Mi colega tuvo un accidente y fui a ayudarle." },
    { tipo: "profesores", drama: "chill", texto: "El profe me pidi√≥ que fuera a por material." },
    { tipo: "curro", drama: "telenovela", texto: "Me pill√≥ una urgencia en el curro, no pude venir." },
    { tipo: "curro", drama: "creible", texto: "Ten√≠a turno extra y no pude avisar." },
    { tipo: "amigos", drama: "telenovela", texto: "Mi amigo desapareci√≥ y tuve que buscarlo toda la noche." },
    { tipo: "padres", drama: "creible", texto: "Tuve que cuidar a mi hermano peque√±o." }
  ];

  const flashcardsBase = {
    mates: [
      "La f√≥rmula del √°rea del c√≠rculo es œÄr¬≤.",
      "El teorema de Pit√°goras dice que a¬≤ + b¬≤ = c¬≤.",
      "Un n√∫mero primo solo es divisible por 1 y por s√≠ mismo."
    ],
    lengua: [
      "Un sustantivo es el nombre de una persona, lugar o cosa.",
      "El verbo indica acci√≥n o estado.",
      "Los adjetivos describen al sustantivo."
    ],
    historia: [
      "La Guerra Civil Espa√±ola fue entre 1936 y 1939.",
      "Crist√≥bal Col√≥n descubri√≥ Am√©rica en 1492.",
      "La Revoluci√≥n Francesa comenz√≥ en 1789."
    ]
  };

  const chistesBase = {
    tontos: [
      "¬øPor qu√© los p√°jaros no usan Facebook? Porque ya tienen Twitter üê¶.",
      "¬øQu√© le dice un pez a otro? ¬°Nada! üêü",
      "¬øQu√© hace una abeja en el gimnasio? ¬°Zum-ba! üêù"
    ],
    profes: [
      "¬øC√≥mo se despiden los qu√≠micos? √Åcido un placer.",
      "¬øPor qu√© los libros de matem√°ticas est√°n tristes? Porque tienen muchos problemas.",
      "¬øQu√© le dice un profesor a otro? Nos vemos en el examen."
    ],
    ligar: [
      "¬øEres WiFi? Porque siento conexi√≥n contigo. üòâ",
      "Si fueras una fruta, ser√≠as una pi√±a‚Ä¶ porque me encantas. üçç",
      "¬øCrees en el amor a primera vista o tengo que volver a pasar? üòè"
    ]
  };

  // --- ESTADO GLOBAL ---
  let usuario = "";
  let excusasUsadas = 0;
  let chistesLeidos = 0;

  // Flashcards user created
  let userFlashcards = JSON.parse(localStorage.getItem("userFlashcards") || "{}");

  // --- ELEMENTOS DOM ---
  const loginSection = document.getElementById("loginSection");
  const nombreInput = document.getElementById("nombreInput");
  const btnEntrar = document.getElementById("btnEntrar");
  const saludo = document.getElementById("saludo");
  const app = document.getElementById("app");

  const menuBtns = {
    excusas: document.getElementById("btnExcusas"),
    flashcards: document.getElementById("btnFlashcards"),
    chistes: document.getElementById("btnChistes"),
    perfil: document.getElementById("btnPerfil"),
    cerrar: document.getElementById("btnCerrar")
  };

  const secciones = {
    excusas: document.getElementById("seccionExcusas"),
    flashcards: document.getElementById("seccionFlashcards"),
    chistes: document.getElementById("seccionChistes"),
    perfil: document.getElementById("seccionPerfil")
  };

  // Excusas
  const excusaCard = document.getElementById("excusaCard");
  const filtroTipo = document.getElementById("filtroTipo");
  const filtroDrama = document.getElementById("filtroDrama");
  const btnNuevaExcusa = document.getElementById("btnNuevaExcusa");
  const
